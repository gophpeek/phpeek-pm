version: "1.0"

global:
  shutdown_timeout: 30
  log_level: info
  log_format: text
  api_enabled: true      # REQUIRED for TUI
  #api_port: 8081
  #metrics_enabled: true
  #resource_metrics_enabled: true
  resource_metrics_interval: 5   # sekunder mellem samples (valgfrit â€“ default er 5)
  resource_metrics_max_samples: 720

processes:
  # Running service
  service1:
    enabled: true        # REQUIRED (defaults to false if missing)
    initial_state: running
    command: ["sh", "-c", "while true; do echo $(date) $PHPEEK_PROCESS:$PHPEEK_INSTANCE heartbeat; sleep 2; done"]
    restart: always

  # Stopped service
  service2:
    enabled: true
    initial_state: stopped  # Can start via TUI
    command: ["sh", "-c", "while true; do echo $(date) $PHPEEK_PROCESS:$PHPEEK_INSTANCE worker loop; sleep 3; done"]
    restart: always

  # Scalable service
  service3:
    enabled: true
    initial_state: running
    command: ["sleep", "300"]
    restart: always
    scale: 4  # 3 instances

  # Scale-locked service
  service4:
    enabled: true
    initial_state: stopped
    command: ["sleep", "300"]
    restart: always
    max_scale: 1  # Cannot scale
